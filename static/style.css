:root{
  --bg:#f7f7f9;
  --card:#fff;
  --ink:#1d2230;
  --muted:#6c7387;
  --accent:#4f7cff;
  --accent-2:#345fe7;

  --header-bg:#eef0f6;
  --surface-2:#f6f7fb;
  --border:rgba(0,0,0,.08);

  --radius:14px;
  --radius-sm:10px;

  --ring: rgba(79,124,255,0.35);
  --shadow-1: 0 4px 10px rgba(0,0,0,.06);
  --shadow-2: 0 12px 28px rgba(0,0,0,.12);
  --shadow-3: 0 26px 60px rgba(0,0,0,.20);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1115;
    --card:#171a21;
    --ink:#e7e9ee;
    --muted:#a7adbb;
    --header-bg:#161a22;
    --surface-2:#1b1f2a;
    --border:rgba(255,255,255,.10);

    --shadow-1: 0 6px 14px rgba(0,0,0,.35);
    --shadow-2: 0 16px 36px rgba(0,0,0,.45);
    --shadow-3: 0 30px 70px rgba(0,0,0,.55);
  }
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Arial, sans-serif;
  color:var(--ink);
  background:var(--bg);
  -webkit-font-smoothing: antialiased;
}

.fm-header{
  position:sticky; top:0; z-index:1000;
  background:var(--header-bg);
  box-shadow: var(--shadow-1);
  backdrop-filter: saturate(140%) blur(8px);
}
.navbar .brand-logo{ height:36px; width:auto; object-fit:contain; transform: translateY(3px); }
.navbar .navlink{
  background:transparent; border:none; color:var(--ink);
  padding:.58rem .9rem; border-radius:var(--radius-sm); font-weight:600;
}
.navbar .navlink:hover{ background:rgba(79,124,255,.10) }
.navbar .navlink.active{ background:#fff; color:#111; box-shadow: var(--shadow-1); }

.hero{
  padding:40px 0 18px;
  background:linear-gradient(180deg, rgba(79,124,255,.06), transparent 50%);
  margin-bottom:8px;
}
.hero-title{ margin:0 0 8px; font-size:clamp(1.6rem, 2.2vw + .9rem, 2.2rem); font-weight:800; letter-spacing:.2px; }
.hero-sub{ margin:0 0 18px; color:var(--muted) }
.hero-bar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
.hero-input{
  flex:1 1 520px; min-width:280px;
  padding:14px 16px; border:1px solid var(--border);
  border-radius:12px; background:#fff; color:var(--ink);
  outline:none; box-shadow: inset 0 1px 0 rgba(0,0,0,.04);
}
.hero-input:focus{ border-color:var(--accent); box-shadow: 0 0 0 4px var(--ring); }
.hero-check{ display:flex; align-items:center; gap:6px; color:var(--muted) }
.hero-btn{
  padding:12px 18px; border:none; border-radius:12px; cursor:pointer;
  background:var(--accent); color:#fff; font-weight:700; letter-spacing:.2px;
  box-shadow: var(--shadow-1);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.hero-btn:hover{ background:var(--accent-2); transform: translateY(-1px); box-shadow: var(--shadow-2); }
.hero-btn:active{ transform: translateY(0); }

.quickchips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:12px }
.chip{
  border:1px solid var(--border); background:var(--card); color:var(--ink);
  padding:7px 12px; border-radius:999px; cursor:pointer; font-size:.95rem;
  transition: box-shadow .12s ease, transform .12s ease, border-color .12s ease;
}
.chip:hover{ border-color:var(--accent); box-shadow: 0 0 0 3px var(--ring); transform: translateY(-1px); }

.negative-chip {
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--ink);
    padding: 7px 12px;
    border-radius: 10px;
    cursor: pointer;
    font-size: .95rem;
    transition: box-shadow .12s ease, transform .12s ease, border-color .12s ease;
}

.history{ margin:10px auto 0 }
.history-header{ display:flex; justify-content:space-between; align-items:center; }
.history h2{ font-size:1.05rem; margin:0 }
.history-list{ list-style:none; margin:8px 0 0; padding:0; display:flex; gap:8px; flex-wrap:wrap; }
.history-list li{
  display:flex; align-items:center; gap:6px;
  border:1px solid var(--border); background:var(--card);
  border-radius:999px; padding:6px 10px; box-shadow: var(--shadow-1);
}
.history-chip{ cursor:pointer; font-size:.95rem; background:none; border:none; color:var(--ink) }
.history-meta{ color:var(--muted); font-size:.85rem }
.linklike{ background:none; border:none; color:var(--accent); cursor:pointer; padding:6px 8px; border-radius:8px; }
.linklike:hover{ background:rgba(79,124,255,.10) }

.results {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  padding: 10px 0 38px;
  max-width: 1600px;
  margin: 0 auto;
}
@media (max-width: 1200px){ .results{ grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 900px){  .results{ grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 600px){  .results{ grid-template-columns: 1fr; } }

.card{ background:var(--card); }

.card.wide{
  padding:0;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background: var(--card);
  overflow:hidden;
  box-shadow: var(--shadow-1);
  transition: transform 180ms cubic-bezier(.2,.8,.2,1), box-shadow 220ms ease, border-color .2s ease;
}
.card.wide .thumb{ background:#e5e6ea; margin:0; }
.card.wide .thumb img,
.card.wide .img-fallback{
  display:block;
  width:100%;
  aspect-ratio: 16 / 9;
  object-fit: cover;
  transition: transform 280ms cubic-bezier(.2,.8,.2,1);
}

.card.wide .band{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  background:var(--card);
  padding:12px 14px; border-top:1px solid var(--border);
}
.card.wide .band-left{ min-width:0; display:flex; flex-direction:column; }
.card.wide .title{
  margin:0;
  font-size:1.02rem; line-height:1.3;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
  overflow:hidden; text-overflow:ellipsis;
  min-height: calc(1.3em * 2);
}
.card.wide .time{ display:block; margin-top:6px; font-size:.92rem; color:var(--muted); }

.card.wide .band-right{ display:flex; gap:8px; flex:0 0 auto; }
.card.wide .icon-btn{
  border:1px solid var(--border); background:var(--surface-2); color:var(--ink);
  border-radius:10px; padding:6px 10px; cursor:pointer; font-weight:700;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
}
.card.wide .icon-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-1); }
.card.wide .fav-btn.active{ background:gold; border-color:gold; color:#222; }
.card.wide .save-btn.active{ background:var(--accent); color:#fff; border-color:var(--accent); }

.card.wide:hover, .card.wide:focus-within{
  transform: translateY(-8px) scale(1.035);
  box-shadow: var(--shadow-3);
}
.card.wide:hover .thumb img, .card.wide:focus-within .thumb img{ transform: scale(1.06); }
.card.wide:active{ transform: translateY(-4px) scale(1.015); box-shadow: var(--shadow-2); }

.card.wide{ display:flex; flex-direction:column; }
.card.wide .more{
  margin-top:auto; padding:0; background: var(--card); border-top:1px solid var(--border);
}
.card.wide .more > summary{
  list-style:none; cursor:pointer; display:flex; align-items:center; gap:8px;
  padding:12px 14px; background: var(--surface-2); color: var(--ink); font-weight:700;
}
.card.wide .more > summary::-webkit-details-marker{ display:none; }
.card.wide .more > summary::before{
  content:"â–¸"; display:inline-block; transform-origin:center; transition: transform .2s ease;
}
.card.wide .more[open] > summary::before{ transform: rotate(90deg); }
.card.wide .more > *:not(summary){
  padding:12px 14px 14px; background: var(--card); color: var(--ink);
}
.card.wide .desc{ color: var(--muted); }

.empty{ text-align:center; color:var(--muted); width:100%; padding:34px }
.skeleton{ overflow:hidden }
.sk-img{ aspect-ratio: 16/9; border-bottom:1px solid var(--border); background:#e7e9ee }
.sk-line{ height:14px; border-radius:8px; background:#e7e9ee; }
.shimmer{ position:relative; overflow:hidden }
.shimmer::after{
  content:""; position:absolute; inset:0; transform:translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.45), transparent);
  animation: shimmer 1.2s infinite;
}
@keyframes shimmer{ 100% { transform: translateX(100%); } }

.hero-input::placeholder{ color:#8e94a5 }
.hero-input, #ingredient { color: #111 !important; caret-color: #111; }
.hero-input::placeholder, #ingredient::placeholder { color:#9aa0b2 !important; opacity:1; }
.hero-input:-webkit-autofill, #ingredient:-webkit-autofill {
  -webkit-text-fill-color:#111 !important;
  transition: background-color 5000s ease-in-out 0s;
}

:root[data-theme="light"]{
  --bg:#f7f7f9; --card:#fff; --ink:#1d2230; --muted:#6c7387; --header-bg:#eef0f6; --surface-2:#f6f7fb; --border:rgba(0,0,0,.08);
}
:root[data-theme="dark"]{
  --bg:#0f1115; --card:#171a21; --ink:#e7e9ee; --muted:#a7adbb; --header-bg:#161a22; --surface-2:#1b1f2a; --border:rgba(255,255,255,.10);
}
:root[data-theme="dark"] .navbar .navbar-brand span,
:root[data-theme="dark"] .logo-text { color:#fff !important; }
:root[data-theme="light"] .navbar .navbar-brand span,
:root:not([data-theme]) .navbar .navbar-brand span { color: var(--ink) !important; }

.theme-fab{
  position: fixed;
  right: max(16px, env(safe-area-inset-right));
  bottom: max(16px, env(safe-area-inset-bottom));
  z-index: 1100;
  width: 52px; height: 52px; border-radius: 999px;
  display: inline-flex; align-items: center; justify-content: center;
  border: 1px solid var(--border);
  background: var(--card); color: var(--ink);
  box-shadow: var(--shadow-2);
  font-size: 20px;
  transition: transform .15s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
  cursor: pointer;
}
.theme-fab:hover{ transform: translateY(-2px); box-shadow: var(--shadow-3); }
.theme-fab:active{ transform: translateY(0); }
.theme-fab:focus-visible{ outline: none; box-shadow: 0 0 0 3px var(--ring), var(--shadow-2); }
@media (max-width: 576px){
  .theme-fab{ bottom: max(14px, env(safe-area-inset-bottom)); right:max(14px, env(safe-area-inset-right)); }
}

.recipe-modal .modal-dialog{
  max-width: min(1100px, calc(100vw - 26px));
}
.recipe-modal .modal-content{
  background: var(--card);
  color: var(--ink);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow-3);
}
.recipe-modal .modal-header,
.recipe-modal .modal-footer{
  background: var(--card);
  border-color: var(--border);
}

.recipe-modal img{
  aspect-ratio:16/9;
  object-fit:cover;
  border-radius:12px;
  background:#e5e6ea;
}

.recipe-modal .modal-grid{
  display: grid;
  gap: 16px;
}
@media (min-width: 992px){
  .recipe-modal .modal-grid{
    grid-template-columns: minmax(360px, 520px) 1fr;
    align-items: start;
  }
}

.recipe-modal .modal-photo{
  width: 100%;
  height: clamp(240px, 38vh, 420px);
  object-fit: cover;
  border-radius: 12px;
  background:#e5e6ea;
}

.recipe-modal .modal-instructions{
  grid-column: 1 / -1;
}

.recipe-modal .step-bullets{
  column-width: 260px;
  column-gap: 22px;

  list-style: disc;
  padding-left: 1.25rem;   
  margin: 0;
}
.recipe-modal .step-bullets .step{
  break-inside: avoid;     
  margin: 0 0 .55rem 0;
  padding-left: .1rem;
  line-height: 1.4;
  color: var(--ink);
}
.recipe-modal .modal-title{ font-weight: 800; }
.recipe-modal .badge{
  background: var(--surface-2) !important;
  color: var(--ink) !important;
  border: 1px solid var(--border) !important;
}

.card.wide .title {                    
  color: var(--ink);
}

.card.wide .time {
  color: var(--muted);
}

:root[data-theme="dark"] .card.wide .title {
  color: #f4f7fb;                      
}
:root[data-theme="dark"] .card.wide .time {
  color: #a7adbb;
}

@media (prefers-color-scheme: dark){
  :root:not([data-theme]) .card.wide .title { color: #f4f7fb; }
  :root:not([data-theme]) .card.wide .time  { color: #a7adbb; }
}

.logo-container,
.navbar .navbar-brand {
  display: flex;
  align-items: center;   
  gap: 8px;              
}

.navbar .brand-logo,
.fm-header .logo {
  height: 32px;          
  width: auto;
  transform: scale(1.5); 
  transform-origin: center;
}

.navbar .navbar-brand .brand-logo,
.logo-container .logo {
  
  height: 32px;
  width: auto;

  
  transform: translateY(4px) scale(1.9); 
  transform-origin: center;
}

.navbar .navbar-brand,
.logo-container {
  gap: 6px !important;   
}

.navbar .navbar-brand span {
  margin-left: -4px;    
}

.navbar .navbar-toggler { border: 1px solid var(--border); }
.navbar .navbar-toggler:focus { box-shadow: 0 0 0 .2rem var(--ring); }
.navbar .navbar-toggler-icon{
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%2829,34,48,0.75%29' stroke-width='2' stroke-linecap='round' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

.mypantry { max-width: 900px; margin-top: 14px; }
#myPantryForm{
  display:flex; flex-wrap:wrap; gap:12px; align-items:center;
  background: var(--header-bg); border:1px solid var(--border);
  border-radius:12px; padding:12px; box-shadow: var(--shadow-1);
}
#myPantryForm .formBox{ flex:1 1 auto; }
#myPantryForm .formBox.big{   flex-basis: 60%; min-width: 220px; }
#myPantryForm .formBox.med{   flex-basis: 18%; min-width: 140px; }
#myPantryForm .formBox.small{ flex-basis: 12%; min-width: 110px; }
#myPantryEmpty{ margin: 4px 2px; }
.pantry-qty{ max-width: 110px; }
.pantry-unit{ min-width: 48px; text-transform: lowercase; color: var(--muted); }

@media (max-width: 600px){
  #myPantryForm .formBox.big,
  #myPantryForm .formBox.med,
  #myPantryForm .formBox.small{ flex-basis:100%; min-width: 100%; }
  .pantry-qty{ max-width: 140px; }
}

#myPantryForm h3 {
  flex: 0 0 100%;
  width: 100%;
  margin: 0 0 8px 2px; 
}

#myPantryEmpty{
  color: var(--muted) !important;   
  opacity: 1;                       
}

:root[data-theme="dark"] #myPantryEmpty{
  color: #c2c8d6 !important;        
}

@media (prefers-color-scheme: dark){
  :root:not([data-theme]) #myPantryEmpty{
    color: #c2c8d6 !important;
  }
}
